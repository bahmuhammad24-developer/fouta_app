# TKT-204: Crashlytics Error Reporting

## Context
Current error handling only logs to the console. We need a gated Crashlytics
integration to collect runtime errors while respecting performance budgets and
privacy.

## Requirements
- Add a `CRASHLYTICS_ENABLED` runtime flag.
- When enabled, forward errors to `FirebaseCrashlytics`.
- Document flag usage and rollback plan.
- Ensure no sensitive data is captured.

## Data Contracts
No new schemas or persistent data.

## Acceptance Criteria
- Errors log via `developer.log`.
- When `CRASHLYTICS_ENABLED` is `true`, errors are forwarded to Crashlytics.
- When the flag is `false`, Crashlytics is not invoked.

## Runtime Flags
- `CRASHLYTICS_ENABLED` (bool, default `false`).

## Metrics & Budgets
- Track Crashlytics error counts.
- p95 latency < 800 ms.
- Storage/egress growth < 20% MoM.

## Risks
- **Performance overhead** — mitigate by gating with flag.
- **Sensitive data leakage** — only send error strings and stack traces.
- **Misconfiguration** — document enable/disable steps.
- **Dependency bloat** — track via DEP record.
- **Rollout issues** — provide quick rollback.

## Test Plan
- Unit test verifying Crashlytics call when flag is on and no-op when off.
- Run full test suite and `flutter analyze`.

## Rollback Steps
- Set `CRASHLYTICS_ENABLED` to `false` to disable reporting.
- If needed, revert this change via Git.
