# Spec TKT-204: Crashlytics Error Reporting v1

## Context
Developers need visibility into uncaught errors. Integrating Crashlytics allows error aggregation without affecting local development or builds that disable it.

## Requirements
- Gate Crashlytics error forwarding behind compile-time env flag `CRASHLYTICS_ENABLED`.
- Preserve existing `developer.log` calls.
- Provide ops documentation for enabling and configuring Crashlytics.

## Data Contracts
Crash reports contain anonymized stack traces and error messages; no additional PII is transmitted.

## Acceptance Criteria
- When `CRASHLYTICS_ENABLED` is `true`, `ErrorReporter.report` forwards errors to Crashlytics.
- When the flag is `false`, no Crashlytics APIs are invoked.
- No runtime exceptions occur if Crashlytics is not initialized.

## Runtime Flags
- `CRASHLYTICS_ENABLED` (bool, compile-time) â€” enables Crashlytics forwarding.

## Metrics
- Crash count per release from Firebase Crashlytics dashboard.

## Risks
- Misconfiguration could crash app at startup.
  - *Mitigation:* Wrap Crashlytics calls in `try/catch` and guard behind flag.

## Test Plan
- Unit tests verify Crashlytics invocation with flag toggled.
- `flutter test --no-pub --coverage`.

## Rollback Plan
- Set `CRASHLYTICS_ENABLED` to `false` to disable forwarding.
- Remove dependency and code paths if permanent rollback required.
